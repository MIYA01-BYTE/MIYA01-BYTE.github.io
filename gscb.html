<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤éŸµæŠ½èƒŒç³»ç»Ÿ</title>
    <style>
        /* åŸæœ‰æ ·å¼ä¿æŒä¸å˜ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'æ¥·ä½“', 'KaiTi', cursive;
        }

        body {
            background: linear-gradient(rgba(243, 238, 232, 0.8), rgba(243, 238, 232, 0.8)),
                        url('gscb-bg.jpg') center/cover fixed;
            min-height: 100vh;
            padding: 20px;
        }

        /* æ–°å¢è‰ºæœ¯æ ‡é¢˜ */
        .classic-title {
            text-align: center;
            font-size: 3rem;
            color: #6b4f36;
            text-shadow: 2px 2px 4px rgba(139, 115, 85, 0.3);
            margin: 30px 0;
            letter-spacing: 4px;
            font-weight: bold;
            position: relative;
            padding-bottom: 15px;
        }

        .classic-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #8b7355, transparent);
        }

 
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .panel {
            background: #fff9f0;
            border: 3px solid #8b7355;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            height: 20px;
            background: #fff9f0;
            clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
        }

        h2 {
            text-align: center;
            color: #6b4f36;
            margin-bottom: 20px;
            font-size: 24px;
            text-shadow: 1px 1px 2px #ddd;
        }

        .display-box {
            height: 100px;
            background: #f7f3e9;
            border: 2px dashed #8b7355;
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: #5a442a;
            position: relative;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(145deg, #8b7355, #6b4f36);
            color: white;
            border: 2px solid #5a442a;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(1px);
        }

        #answer {
            display: none;
            white-space: pre-wrap;
            line-height: 1.8;
            color: #5a442a;
            padding: 15px;
            background: #f7f3e9;
            border-radius: 10px;
            margin-top: 15px;
        /* æ–°å¢å­—ä½“å¤§å°è®¾ç½® */
            font-size: 20px;  /* åŸºç¡€å­—å· */
            font-weight: 500; /* å¯é€‰åŠ ç²— */
        }

        input[type="file"] {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(145deg, #a2836e, #8b7355);
            margin: 10px 0;
        }

        .decorative {
            position: fixed;
            opacity: 0.1;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            .display-box {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <audio id="bgm" src="gscbbg.mp3" loop></audio>

    <!-- æ–°å¢æ ‡é¢˜ -->
    <h1 class="classic-title">è¯—éŸµç…å¬›</h1>
    
    <div class="container">
        <!-- å­¦ç”ŸæŠ½é€‰é¢æ¿ -->
        <div class="panel">
            <h2>ğŸ“ å­¦å­æŠ½é€‰</h2>
            <button class="upload-btn" onclick="document.getElementById('stuFile').click()">ğŸ“œ å¯¼å…¥å­¦å­åå½•ï¼ˆè¯·å¯¼å…¥txtæ–‡æ¡£ï¼Œæ¯è¡Œä¸€ä¸ªå§“åï¼‰</button>
            <div class="display-box" id="studentDisplay">é™å€™æŠ½é€‰</div>
            <div class="button-group">
                <button onclick="toggleStudent()">ğŸ² å¼€å§‹æŠ½é€‰</button>
                <button onclick="stopStudent()">â¸ï¸ æš‚åœ</button>
            </div>
        </div>

        <!-- å¤è¯—æŠ½é€‰é¢æ¿ -->
        <div class="panel">
            <h2>ğŸ“œ å¤è¯—æŠ½é€‰</h2>
            <button class="upload-btn" onclick="document.getElementById('poemFile').click()">ğŸ“– å¯¼å…¥è¯—è¯åº“ï¼ˆè¯·å¯¼å…¥txtæ–‡æ¡£ï¼Œæ ‡é¢˜ä¸å†…å®¹ç”¨æ¢è¡Œåˆ†éš”ï¼Œä¸¤é¦–å¤è¯—ä¹‹é—´éœ€ç©ºä¸€è¡Œï¼‰</button>
            <div class="display-box" id="poemDisplay">å¾…å›æ¥æŠ½</div>
            <div id="answer"></div>
            <div class="button-group">
                <button onclick="togglePoem()">ğŸŒ¸ å¼€å§‹æŠ½é¢˜</button>
                <button onclick="stopPoem()">â¸ï¸ æš‚åœ</button>
                <button onclick="showAnswer()">ğŸ” æŸ¥çœ‹ç­”æ¡ˆ</button>
            </div>
        </div>
    </div>

    <input type="file" id="stuFile" accept=".txt" onchange="loadStudents(event)">
    <input type="file" id="poemFile" accept=".txt" onchange="loadPoems(event)">

    <script>
        // éŸ³ä¹æ§åˆ¶
        const bgm = document.getElementById('bgm');
        bgm.volume = 0.5;

        // é»˜è®¤æ•°æ®
        let students = Array.from({length:60}, (_,i) => `å­¦å­ ${i+1}`);
        let poems = [
            ["è§‚æ²§æµ·", "ä¸œä¸´ç¢£çŸ³ï¼Œä»¥è§‚æ²§æµ·ã€‚\næ°´ä½•æ¾¹æ¾¹ï¼Œå±±å²›ç«¦å³™ã€‚\næ ‘æœ¨ä¸›ç”Ÿï¼Œç™¾è‰ä¸°èŒ‚ã€‚\nç§‹é£è§ç‘Ÿï¼Œæ´ªæ³¢æ¶Œèµ·ã€‚\næ—¥æœˆä¹‹è¡Œï¼Œè‹¥å‡ºå…¶ä¸­ï¼›\næ˜Ÿæ±‰ç¿çƒ‚ï¼Œè‹¥å‡ºå…¶é‡Œã€‚\nå¹¸ç”šè‡³å“‰ï¼Œæ­Œä»¥å’å¿—ã€‚"],
            ["æ¬¡åŒ—å›ºå±±ä¸‹", "å®¢è·¯é’å±±å¤–ï¼Œè¡ŒèˆŸç»¿æ°´å‰ã€‚\næ½®å¹³ä¸¤å²¸é˜”ï¼Œé£æ­£ä¸€å¸†æ‚¬ã€‚\næµ·æ—¥ç”Ÿæ®‹å¤œï¼Œæ±Ÿæ˜¥å…¥æ—§å¹´ã€‚\nä¹¡ä¹¦ä½•å¤„è¾¾ï¼Ÿå½’é›æ´›é˜³è¾¹ã€‚"],
            ["é—»ç‹æ˜Œé¾„å·¦è¿é¾™æ ‡é¥æœ‰æ­¤å¯„", "æ¨èŠ±è½å°½å­è§„å•¼ï¼Œ\né—»é“é¾™æ ‡è¿‡äº”æºªã€‚\næˆ‘å¯„æ„å¿ƒä¸æ˜æœˆï¼Œ\néšå›ç›´åˆ°å¤œéƒè¥¿ã€‚"],
            ["å¤©å‡€æ²™Â·ç§‹æ€", "æ¯è—¤è€æ ‘æ˜é¸¦ï¼Œ\nå°æ¡¥æµæ°´äººå®¶ï¼Œ\nå¤é“è¥¿é£ç˜¦é©¬ã€‚\nå¤•é˜³è¥¿ä¸‹ï¼Œ\næ–­è‚ äººåœ¨å¤©æ¶¯ã€‚"],
            ["å³¨çœ‰å±±æœˆæ­Œ", "å³¨çœ‰å±±æœˆåŠè½®ç§‹ï¼Œ\nå½±å…¥å¹³ç¾Œæ±Ÿæ°´æµã€‚\nå¤œå‘æ¸…æºªå‘ä¸‰å³¡ï¼Œ\næ€å›ä¸è§ä¸‹æ¸å·ã€‚"],
            ["æ±Ÿå—é€¢æé¾Ÿå¹´", "å²ç‹å®…é‡Œå¯»å¸¸è§ï¼Œ\nå´”ä¹å ‚å‰å‡ åº¦é—»ã€‚\næ­£æ˜¯æ±Ÿå—å¥½é£æ™¯ï¼Œ\nè½èŠ±æ—¶èŠ‚åˆé€¢å›ã€‚"],
            ["è¡Œå†›ä¹æ—¥æ€é•¿å®‰æ•…å›­", "å¼ºæ¬²ç™»é«˜å»ï¼Œ\næ— äººé€é…’æ¥ã€‚\né¥æ€œæ•…å›­èŠï¼Œ\nåº”å‚æˆ˜åœºå¼€ã€‚"],
            ["å¤œä¸Šå—é™åŸé—»ç¬›", "å›ä¹å³°å‰æ²™ä¼¼é›ªï¼Œ\nå—é™åŸå¤–æœˆå¦‚éœœã€‚\nä¸çŸ¥ä½•å¤„å¹èŠ¦ç®¡ï¼Œ\nä¸€å¤œå¾äººå°½æœ›ä¹¡ã€‚"],
            ["ç§‹è¯ï¼ˆå…¶ä¸€ï¼‰", "è‡ªå¤é€¢ç§‹æ‚²å¯‚å¯¥ï¼Œ\næˆ‘è¨€ç§‹æ—¥èƒœæ˜¥æœã€‚\næ™´ç©ºä¸€é¹¤æ’äº‘ä¸Šï¼Œ\nä¾¿å¼•è¯—æƒ…åˆ°ç¢§éœ„ã€‚"],
            ["å¤œé›¨å¯„åŒ—", "å›é—®å½’æœŸæœªæœ‰æœŸï¼Œ\nå·´å±±å¤œé›¨æ¶¨ç§‹æ± ã€‚\nä½•å½“å…±å‰ªè¥¿çª—çƒ›ï¼Œ\nå´è¯å·´å±±å¤œé›¨æ—¶ã€‚"],
            ["åä¸€æœˆå››æ—¥é£é›¨å¤§ä½œï¼ˆå…¶äºŒï¼‰", "åƒµå§å­¤æ‘ä¸è‡ªå“€ï¼Œ\nå°šæ€ä¸ºå›½æˆè½®å°ã€‚\nå¤œé˜‘å§å¬é£å¹é›¨ï¼Œ\né“é©¬å†°æ²³å…¥æ¢¦æ¥ã€‚"],
            ["æ½¼å…³", "ç»ˆå¤é«˜äº‘ç°‡æ­¤åŸï¼Œ\nç§‹é£å¹æ•£é©¬è¹„å£°ã€‚\næ²³æµå¤§é‡çŠ¹å«ŒæŸï¼Œ\nå±±å…¥æ½¼å…³ä¸è§£å¹³ã€‚"]
        ];

        // å­¦ç”ŸæŠ½é€‰é€»è¾‘
        let studentInterval;
        function toggleStudent() {
            hideAnswer();
            if (!studentInterval) {
                bgm.play();
                studentInterval = setInterval(() => {
                    document.getElementById('studentDisplay').textContent = 
                        students[Math.floor(Math.random() * students.length)];
                }, 100);
            }
        }
        function stopStudent() {
            clearInterval(studentInterval);
            studentInterval = null;
            bgm.pause();
        }

        // å¤è¯—æŠ½é€‰é€»è¾‘
        let poemInterval;
        function togglePoem() {
            hideAnswer();
            if (!poemInterval) {
                bgm.play();
                poemInterval = setInterval(() => {
                    const poem = poems[Math.floor(Math.random() * poems.length)];
                    document.getElementById('poemDisplay').textContent = poem[0];
                    document.getElementById('answer').textContent = poem[1];
                }, 100);
            }
        }
        function stopPoem() {
            clearInterval(poemInterval);
            poemInterval = null;
            bgm.pause();
        }
        function showAnswer() {
            document.getElementById('answer').style.display = 'block';
        }
        function hideAnswer() {
            document.getElementById('answer').style.display = 'none';
        }

        // æ–‡ä»¶åŠ è½½
    function loadStudents(e) {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            // æ¸…é™¤æ—§æ•°æ®åå¯¼å…¥æ–°æ•°æ®
            students = e.target.result.split('\n')
                .map(line => line.trim())
                .filter(line => line !== '');

            // å¼ºåˆ¶è§¦å‘é¡µé¢æ›´æ–°
            document.getElementById('studentDisplay').textContent = 
                students.length > 0 ? "åå•å·²æ›´æ–°" : "é™å€™æŠ½é€‰";

            alert(`æˆåŠŸå¯¼å…¥ ${students.length} ä½å­¦å­\næ–‡ä»¶ï¼š${file.name}`);
            
            // é‡ç½®æ–‡ä»¶é€‰æ‹©å™¨
            document.getElementById('stuFile').value = '';
        };
        reader.readAsText(file);
    }

    function loadPoems(e) {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            const rawText = e.target.result
                .replace(/\r\n/g, '\n')
                .replace(/\r/g, '\n')

            const poemBlocks = rawText.split(/\n{2,}/)
                .filter(block => block.trim() !== '');

            // æ¸…é™¤æ—§æ•°æ®åå¯¼å…¥æ–°æ•°æ®
            poems = poemBlocks.map(block => {
                const lines = block.split('\n')
                    .map(line => line.trim())
                    .filter(line => line !== '');
                return lines.length > 0 ? [lines[0], lines.slice(1).join('\n')] : null;
            }).filter(Boolean);

            // å¼ºåˆ¶åˆ·æ–°æ˜¾ç¤º
            document.getElementById('poemDisplay').textContent = 
                poems.length > 0 ? "é¢˜åº“å·²æ›´æ–°" : "å¾…å›æ¥æŠ½";

            alert(`æˆåŠŸå¯¼å…¥ ${poems.length} é¦–å¤è¯—\næ–‡ä»¶ï¼š${file.name}`);
            
            // é‡ç½®æ–‡ä»¶é€‰æ‹©å™¨
            document.getElementById('poemFile').value = '';
        };
        reader.readAsText(file);
    }
    </script>
</body>
</html>